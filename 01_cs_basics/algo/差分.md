
跟前缀和是类似于积分与求导关系，差分是求当前元素减去前边所有元素的和，第一个元素就是 `a` 中的第一个元素：

```python
a = [a0, a1, a2, ..., an]
diff[i] = ai - ai_1 - ... - a0
```

还原到原来的数组只要求前缀和就ok了：

```python
list(accumulate(diff))
```

目前理解是主要用在对子数组的批量操作上。比如说我想对 `[i, j]` 区间上的所有元素都 +1，反映到差分数组 `diff` 上就是：

```python
diff[i] += 1
diff[j] -= 1
```

这里 `diff[i] += 1` 相当于在原数组 `a` 中对 `i` 以后的数字都 +1，因为后边的位置想要还原成 `a` 的时候，需要加前边的 `a[i]` ，所以`a` 中对 `i` 以后的数字都 +1。同理 `a[j]` 后边的数字就都 -1。二者效果叠加到一起，就剩下中间 `a[i]` 到 `a[j]` 的数字 +1 了。图示：

![差分](https://pic.leetcode.cn/1747885435-uDDcwT-lc1094-c.png)


1. 基础用法

[1094](https://leetcode.cn/problems/car-pooling/description/)
```python
class Solution:
    def carPooling(self, trips: List[List[int]], capacity: int) -> bool:
        diff = [0 for _ in range(1001)]
        diff[0] = 0

        for num_pass, fr, to in trips:
            diff[fr] += num_pass
            diff[to] -= num_pass
        
        summer = 0
        for i in range(len(diff)):
            summer += diff[i]
            if summer > capacity:
                return False
        
        return True
```
